define ("core_form/configtext_maxlength",["exports","core/str","core/templates"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;c=function(a){return a&&a.__esModule?a:{default:a}}(c);var d=!1,e=function(){if(d){return}d=!0;document.addEventListener("change",function(a){var d=a.target.closest("[data-validation-max-length]");if(!d){return}if(d.dataset.validationFailureId){var e=document.getElementById(d.dataset.validationFailureId);e.parentElement.remove()}if(d.value.length>d.dataset.validationMaxLength){d.form.addEventListener("submit",f);(0,b.get_string)("maximumchars","core",d.dataset.validationMaxLength).then(function(a){return c.default.renderForPromise("core_form/setting_validation_failure",{field:d.id,message:a})}).then(function(a){var b=d.closest(".form-text");c.default.prependNodeContents(b,c.default.prependNodeContents(d,a.html,a.js),a.js);d.dataset.validationFailureId="maxlength_error_"+d.id;return a}).then(function(){d.setAttribute("aria-invalid",!0);var a=document.getElementById(d.dataset.validationFailureId);a.setAttribute("aria-describedby",d.id)}).catch(Notification.exception)}else{delete d.dataset.validationFailureId;d.removeAttribute("aria-invalid")}})};a.init=e;var f=function(a){var b=a.target.querySelectorAll("[data-validation-max-length]"),c=Array.from(b);c.some(function(b){if(b.value.length>b.dataset.validationMaxLength){a.preventDefault();b.focus();return!0}return!1})}});
//# sourceMappingURL=configtext_maxlength.min.js.map
