function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(!a)return;if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,b)}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}function set(a,b,c,d){if("undefined"!=typeof Reflect&&Reflect.set){set=Reflect.set}else{set=function(a,b,c,d){var e=_superPropBase(a,b),f;if(e){f=Object.getOwnPropertyDescriptor(e,b);if(f.set){f.set.call(d,c);return!0}else if(!f.writable){return!1}}f=Object.getOwnPropertyDescriptor(d,b);if(f){if(!f.writable){return!1}f.value=c;Object.defineProperty(d,b,f)}else{_defineProperty(d,b,c)}return!0}}return set(a,b,c,d)}function _set(a,b,c,d,e){var f=set(a,b,c,d||a);if(!f&&e){throw new Error("failed to set property")}return c}function _get(a,b,c){if("undefined"!=typeof Reflect&&Reflect.get){_get=Reflect.get}else{_get=function(a,b,c){var d=_superPropBase(a,b);if(!d)return;var e=Object.getOwnPropertyDescriptor(d,b);if(e.get){return e.get.call(c)}return e.value}}return _get(a,b,c||a)}function _superPropBase(a,b){while(!Object.prototype.hasOwnProperty.call(a,b)){a=_getPrototypeOf(a);if(null===a)break}return a}function _inherits(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});if(b)_setPrototypeOf(a,b)}function _createSuper(a){return function(){var b=_getPrototypeOf(a),c;if(_isNativeReflectConstruct()){var d=_getPrototypeOf(this).constructor;c=Reflect.construct(b,arguments,d)}else{c=b.apply(this,arguments)}return _possibleConstructorReturn(this,c)}}function _possibleConstructorReturn(a,b){if(b&&("object"===_typeof(b)||"function"==typeof b)){return b}return _assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;_wrapNativeSuper=function(a){if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a){throw new TypeError("Super expression must either be null or a function")}if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});return _setPrototypeOf(c,a)};return _wrapNativeSuper(a)}function _construct(){if(_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function(b,c,d){var e=[null];e.push.apply(e,c);var a=Function.bind.apply(b,e),f=new a;if(d)_setPrototypeOf(f,d.prototype);return f}}return _construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(a){return!1}}function _isNativeFunction(a){return-1!==Function.toString.call(a).indexOf("[native code]")}function _setPrototypeOf(a,b){_setPrototypeOf=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return _setPrototypeOf(a,b)}function _getPrototypeOf(a){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return _getPrototypeOf(a)}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function _objectSpread(a){for(var b=1,c;b<arguments.length;b++){c=null!=arguments[b]?arguments[b]:{};if(b%2){ownKeys(Object(c),!0).forEach(function(b){_defineProperty(a,b,c[b])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(a,Object.getOwnPropertyDescriptors(c))}else{ownKeys(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}}return a}function _defineProperty(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){if(b)_defineProperties(a.prototype,b);if(c)_defineProperties(a,c);return a}function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define ("atto_recordrtc/local/mp3-mediarecorder/mp3-mediarecorder",["exports"],b):(a="undefined"!=typeof globalThis?globalThis:a||self,b(a.mp3MediaRecorder={}))})(this,function(a){'use strict';function b(a,b){if(!a){for(var d=arguments.length,e=Array(2<d?d-2:0),f=2;f<d;f++){e[f-2]=arguments[f]}throw new TypeError(c(b,e))}}function c(a,b){var c=0;return a.replace(/%[os]/g,function(){return d(b[c++])})}function d(a){if("object"!==_typeof(a)||null===a){return a+""}return Object.prototype.toString.call(a)}var M;function e(a){try{var b=a instanceof Error?a:new Error(d(a));if(M);if("function"==typeof dispatchEvent&&"function"==typeof ErrorEvent){dispatchEvent(new ErrorEvent("error",{error:b,message:b.message}))}else if("undefined"!=typeof process&&"function"==typeof process.emit){process.emit("uncaughtException",b);return}console.error(b)}catch(a){}}var N="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:void 0,O,P=function(){function a(b,c){_classCallCheck(this,a);this.code=b;this.message=c}_createClass(a,[{key:"warn",value:function warn(){var a;try{var b;if(O);for(var c=(null!==(a=new Error().stack)&&void 0!==a?a:"").replace(/^(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+?\n){2}/g,"\n"),d=arguments.length,e=Array(d),f=0;f<d;f++){e[f]=arguments[f]}(b=console).warn.apply(b,[this.message].concat(e,[c]))}catch(a){}}}]);return a}(),Q=new P("W01","Unable to initialize event under dispatching."),R=new P("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),S=new P("W03","Assigning any truthy value to 'returnValue' property has no effect."),T=new P("W04","Unable to preventDefault on non-cancelable events."),U=new P("W05","Unable to preventDefault inside passive event listener invocation."),V=new P("W06","An event listener wasn't added because it has been added already: %o, %o"),W=new P("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),X=new P("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),Y=new P("W09","Event attribute handler must be a function: %o"),Z=function(){_createClass(a,null,[{key:"NONE",get:function get(){return $}},{key:"CAPTURING_PHASE",get:function get(){return _}},{key:"AT_TARGET",get:function get(){return aa}},{key:"BUBBLING_PHASE",get:function get(){return ba}}]);function a(b,c){_classCallCheck(this,a);Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});var d=null!==c&&void 0!==c?c:{};ca.set(this,{type:b+"",bubbles:!!d.bubbles,cancelable:!!d.cancelable,composed:!!d.composed,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}_createClass(a,[{key:"composedPath",value:function composedPath(){var a=f(this).currentTarget;if(a){return[a]}return[]}},{key:"stopPropagation",value:function stopPropagation(){f(this).stopPropagationFlag=!0}},{key:"stopImmediatePropagation",value:function stopImmediatePropagation(){var a=f(this);a.stopPropagationFlag=a.stopImmediatePropagationFlag=!0}},{key:"preventDefault",value:function preventDefault(){g(f(this))}},{key:"initEvent",value:function initEvent(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1,d=f(this);if(d.dispatchFlag){Q.warn();return}ca.set(this,_objectSpread({},d,{type:a+"",bubbles:!!b,cancelable:!!c,target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1}))}},{key:"type",get:function get(){return f(this).type}},{key:"target",get:function get(){return f(this).target}},{key:"srcElement",get:function get(){return f(this).target}},{key:"currentTarget",get:function get(){return f(this).currentTarget}},{key:"NONE",get:function get(){return $}},{key:"CAPTURING_PHASE",get:function get(){return _}},{key:"AT_TARGET",get:function get(){return aa}},{key:"BUBBLING_PHASE",get:function get(){return ba}},{key:"eventPhase",get:function get(){return f(this).dispatchFlag?2:0}},{key:"cancelBubble",get:function get(){return f(this).stopPropagationFlag},set:function(a){if(a){f(this).stopPropagationFlag=!0}else{R.warn()}}},{key:"bubbles",get:function get(){return f(this).bubbles}},{key:"cancelable",get:function get(){return f(this).cancelable}},{key:"returnValue",get:function get(){return!f(this).canceledFlag},set:function(a){if(!a){g(f(this))}else{S.warn()}}},{key:"defaultPrevented",get:function get(){return f(this).canceledFlag}},{key:"composed",get:function get(){return f(this).composed}},{key:"isTrusted",get:function get(){return!1}},{key:"timeStamp",get:function get(){return f(this).timeStamp}}]);return a}(),$=0,_=1,aa=2,ba=3,ca=new WeakMap;function f(a){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"this",d=ca.get(a);b(null!=d,"'%s' must be an object that Event constructor created, but got another one: %o",c,a);return d}function g(a){if(a.inPassiveListenerFlag){U.warn();return}if(!a.cancelable){T.warn();return}a.canceledFlag=!0}Object.defineProperty(Z,"NONE",{enumerable:!0});Object.defineProperty(Z,"CAPTURING_PHASE",{enumerable:!0});Object.defineProperty(Z,"AT_TARGET",{enumerable:!0});Object.defineProperty(Z,"BUBBLING_PHASE",{enumerable:!0});for(var da=Object.getOwnPropertyNames(Z.prototype),ea=0;ea<da.length;++ea){if("constructor"===da[ea]){continue}Object.defineProperty(Z.prototype,da[ea],{enumerable:!0})}if("undefined"!=typeof N&&"undefined"!=typeof N.Event){Object.setPrototypeOf(Z.prototype,N.Event.prototype)}function h(a){if(N.DOMException){return new N.DOMException(a,"InvalidStateError")}if(null==fa){fa=function(a){_inherits(b,a);var c=_createSuper(b);function b(a){var d;_classCallCheck(this,b);d=c.call(this,a);if(Error.captureStackTrace){Error.captureStackTrace(_assertThisInitialized(d),b)}return d}_createClass(b,[{key:"code",get:function get(){return 11}},{key:"name",get:function get(){return"InvalidStateError"}}]);return b}(_wrapNativeSuper(Error));Object.defineProperties(fa.prototype,{code:{enumerable:!0},name:{enumerable:!0}});j(fa);j(fa.prototype)}return new fa(a)}var fa,ga={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function j(a){for(var b=Object.keys(ga),c=function(c){var d=b[c],e=ga[d];Object.defineProperty(a,d,{get:function get(){return e},configurable:!0,enumerable:!0})},d=0;d<b.length;++d){c(d)}}var ha=function(a){_inherits(b,a);var c=_createSuper(b);_createClass(b,null,[{key:"wrap",value:function wrap(a){return new(l(a))(a)}}]);function b(a){var d;_classCallCheck(this,b);d=c.call(this,a.type,{bubbles:a.bubbles,cancelable:a.cancelable,composed:a.composed});if(a.cancelBubble){_get(_getPrototypeOf(b.prototype),"stopPropagation",_assertThisInitialized(d)).call(_assertThisInitialized(d))}if(a.defaultPrevented){_get(_getPrototypeOf(b.prototype),"preventDefault",_assertThisInitialized(d)).call(_assertThisInitialized(d))}ia.set(_assertThisInitialized(d),{original:a});for(var e=Object.keys(a),f=0,g;f<e.length;++f){g=e[f];if(!(g in _assertThisInitialized(d))){Object.defineProperty(_assertThisInitialized(d),g,n(a,g))}}return d}_createClass(b,[{key:"stopPropagation",value:function stopPropagation(){_get(_getPrototypeOf(b.prototype),"stopPropagation",this).call(this);var a=k(this),c=a.original;if("stopPropagation"in c){c.stopPropagation()}}},{key:"stopImmediatePropagation",value:function stopImmediatePropagation(){_get(_getPrototypeOf(b.prototype),"stopImmediatePropagation",this).call(this);var a=k(this),c=a.original;if("stopImmediatePropagation"in c){c.stopImmediatePropagation()}}},{key:"preventDefault",value:function preventDefault(){_get(_getPrototypeOf(b.prototype),"preventDefault",this).call(this);var a=k(this),c=a.original;if("preventDefault"in c){c.preventDefault()}}},{key:"cancelBubble",get:function get(){return _get(_getPrototypeOf(b.prototype),"cancelBubble",this)},set:function(a){_set(_getPrototypeOf(b.prototype),"cancelBubble",a,this,!0);var c=k(this),d=c.original;if("cancelBubble"in d){d.cancelBubble=a}}},{key:"returnValue",get:function get(){return _get(_getPrototypeOf(b.prototype),"returnValue",this)},set:function(a){_set(_getPrototypeOf(b.prototype),"returnValue",a,this,!0);var c=k(this),d=c.original;if("returnValue"in d){d.returnValue=a}}},{key:"timeStamp",get:function get(){var a=k(this),c=a.original;if("timeStamp"in c){return c.timeStamp}return _get(_getPrototypeOf(b.prototype),"timeStamp",this)}}]);return b}(Z),ia=new WeakMap;function k(a){var c=ia.get(a);b(null!=c,"'this' is expected an Event object, but got",a);return c}var ja=new WeakMap;ja.set(Object.prototype,ha);if("undefined"!=typeof N&&"undefined"!=typeof N.Event){ja.set(N.Event.prototype,ha)}function l(a){var b=Object.getPrototypeOf(a);if(null==b){return ha}var c=ja.get(b);if(null==c){c=m(l(b),b);ja.set(b,c)}return c}function m(a,b){for(var c=function(a){_inherits(b,a);var c=_createSuper(b);function b(){_classCallCheck(this,b);return c.apply(this,arguments)}return b}(a),d=Object.keys(b),e=0;e<d.length;++e){Object.defineProperty(c.prototype,d[e],n(b,d[e]))}return c}function n(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return{get:function get(){var a=k(this).original,c=a[b];if("function"==typeof c){return c.bind(a)}return c},set:function(a){var c=k(this).original;c[b]=a},configurable:c.configurable,enumerable:c.enumerable}}function o(a,b,c,d,e,f){return{callback:a,flags:(b?1:0)|(c?2:0)|(d?4:0),signal:e,signalListener:f}}function p(a){a.flags|=8}function q(a){return 1==(1&a.flags)}function r(a){return 2==(2&a.flags)}function s(a){return 4==(4&a.flags)}function t(a){return 8==(8&a.flags)}function u(a,b,c){var d=a.callback;try{if("function"==typeof d){d.call(b,c)}else if("function"==typeof d.handleEvent){d.handleEvent(c)}}catch(a){e(a)}}function v(a,b,c){for(var d=a.listeners,e=0;e<d.length;++e){if(d[e].callback===b&&q(d[e])===c){return e}}return-1}function w(a,b,c,d,e,f){var g;if(f){g=x.bind(null,a,b,c);f.addEventListener("abort",g)}var h=o(b,c,d,e,f,g);if(a.cow){a.cow=!1;a.listeners=[].concat(_toConsumableArray(a.listeners),[h])}else{a.listeners.push(h)}return h}function x(a,b,c){var d=v(a,b,c);if(-1!==d){return y(a,d)}return!1}function y(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!1,d=a.listeners[b];p(d);if(d.signal){d.signal.removeEventListener("abort",d.signalListener)}if(a.cow&&!c){a.cow=!1;a.listeners=a.listeners.filter(function(a,c){return c!==b});return!1}a.listeners.splice(b,1);return!0}function z(){return Object.create(null)}function A(a,b){var c;return null!==(c=a[b])&&void 0!==c?c:a[b]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}var ka=function(){function a(){_classCallCheck(this,a);la.set(this,z())}_createClass(a,[{key:"addEventListener",value:function addEventListener(a,b,c){var d=B(this),e=C(a,b,c),f=e.callback,g=e.capture,h=e.once,j=e.passive,k=e.signal,l=e.type;if(null==f||(null===k||void 0===k?void 0:k.aborted)){return}var m=A(d,l),n=v(m,f,g);if(-1!==n){F(m.listeners[n],j,h,k);return}w(m,f,g,j,h,k)}},{key:"removeEventListener",value:function removeEventListener(a,b,c){var d=B(this),e=D(a,b,c),f=e.callback,g=e.capture,h=e.type,i=d[h];if(null!=f&&i){x(i,f,g)}}},{key:"dispatchEvent",value:function dispatchEvent(a){var b=B(this)[a.type+""];if(null==b){return!0}var c=a instanceof Z?a:ha.wrap(a),d=f(c,"event");if(d.dispatchFlag){throw h("This event has been in dispatching.")}d.dispatchFlag=!0;d.target=d.currentTarget=this;if(!d.stopPropagationFlag){var e=b.cow,g=b.listeners;b.cow=!0;for(var i=0,j;i<g.length;++i){j=g[i];if(t(j)){continue}if(s(j)&&y(b,i,!e)){i-=1}d.inPassiveListenerFlag=r(j);u(j,this,c);d.inPassiveListenerFlag=!1;if(d.stopImmediatePropagationFlag){break}}if(!e){b.cow=!1}}d.target=null;d.currentTarget=null;d.stopImmediatePropagationFlag=!1;d.stopPropagationFlag=!1;d.dispatchFlag=!1;return!d.canceledFlag}}]);return a}(),la=new WeakMap;function B(a){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"this",d=la.get(a);b(null!=d,"'%s' must be an object that EventTarget constructor created, but got another one: %o",c,a);return d}function C(a,b,c){var d;E(b);if("object"===_typeof(c)&&null!==c){return{type:a+"",callback:null!==b&&void 0!==b?b:void 0,capture:!!c.capture,passive:!!c.passive,once:!!c.once,signal:null!==(d=c.signal)&&void 0!==d?d:void 0}}return{type:a+"",callback:null!==b&&void 0!==b?b:void 0,capture:!!c,passive:!1,once:!1,signal:void 0}}function D(a,b,c){E(b);if("object"===_typeof(c)&&null!==c){return{type:a+"",callback:null!==b&&void 0!==b?b:void 0,capture:!!c.capture}}return{type:a+"",callback:null!==b&&void 0!==b?b:void 0,capture:!!c}}function E(a){if("function"==typeof a||"object"===_typeof(a)&&null!==a&&"function"==typeof a.handleEvent){return}if(null==a||"object"===_typeof(a)){X.warn(a);return}throw new TypeError(c(X.message,[a]))}function F(a,b,c,d){V.warn(q(a)?"capture":"bubble",a.callback);if(r(a)!==b){W.warn("passive")}if(s(a)!==c){W.warn("once")}if(a.signal!==d){W.warn("signal")}}for(var ma=Object.getOwnPropertyNames(ka.prototype),na=0;na<ma.length;++na){if("constructor"===ma[na]){continue}Object.defineProperty(ka.prototype,ma[na],{enumerable:!0})}if("undefined"!=typeof N&&"undefined"!=typeof N.EventTarget){Object.setPrototypeOf(ka.prototype,N.EventTarget.prototype)}function G(a,b){var c,d,e=B(a,"target");return null!==(d=null===(c=e[b])||void 0===c?void 0:c.attrCallback)&&void 0!==d?d:null}function H(a,b,c){if(null!=c&&"function"!=typeof c){Y.warn(c)}if("function"==typeof c||"object"===_typeof(c)&&null!==c){I(a,b,c)}else{J(a,b)}}function I(a,b,c){var d=A(B(a,"target"),b+"");d.attrCallback=c;if(null==d.attrListener){d.attrListener=w(d,K(d),!1,!1,!1,void 0)}}function J(a,b){var c=B(a,"target"),d=c[b+""];if(d&&d.attrListener){x(d,d.attrListener.callback,!1);d.attrCallback=d.attrListener=void 0}}function K(a){return function(b){var c=a.attrCallback;if("function"==typeof c){c.call(this,b)}}}function L(a,b){Object.defineProperty(a,"on".concat(b),{get:function get(){return G(this,b)},set:function(a){H(this,b,a)},configurable:!0,enumerable:!0})}var oa;(function(a){a.DATA_AVAILABLE="DATA_AVAILABLE";a.START_RECORDING="START_RECORDING";a.STOP_RECORDING="STOP_RECORDING";a.ERROR="ERROR";a.BLOB_READY="BLOB_READY";a.WORKER_RECORDING="WORKER_RECORDING"})(oa||(oa={}));var pa=function(a){return{type:oa.START_RECORDING,config:a}},qa=function(a){return{type:oa.DATA_AVAILABLE,data:a}},ra=function(){return{type:oa.STOP_RECORDING}},sa="audio/mpeg",ta=window.AudioContext||window.webkitAudioContext,ua=function(a){return(a.createGain||a.createGainNode).call(a)},va=function(a){return(a.createScriptProcessor||a.createJavaScriptNode).call(a,4096,1,1)},wa=function(a){_inherits(b,a);var c=_createSuper(b);function b(a,d){var e,f=d.audioContext,g=d.worker;_classCallCheck(this,b);e=c.call(this);e.mimeType=sa;e.state="inactive";e.audioBitsPerSecond=0;e.videoBitsPerSecond=0;e.isInternalAudioContext=!1;e.onWorkerMessage=function(a){var b=a.data;switch(b.type){case oa.WORKER_RECORDING:{var h=new Event("start");e.dispatchEvent(h);e.state="recording";break}case oa.ERROR:{var c=new Error(b.error),d=new Event("error");d.error=c;e.dispatchEvent(d);e.state="inactive";break}case oa.BLOB_READY:{var f=new Event("stop"),g=new Event("dataavailable");g.data=b.blob;g.timecode=Date.now();var i=window.BlobEvent?new BlobEvent("dataavailable",{data:b.blob,timecode:Date.now()}):g;e.dispatchEvent(i);e.dispatchEvent(f);e.state="inactive";break}case oa.ERROR:{throw new Error(b.error)}}};if(!g){throw new Error("No worker provided in Mp3MediaRecorder constructor.")}e.stream=a;e.isInternalAudioContext=!f;e.audioContext=f||new ta;e.worker=g;e.sourceNode=e.audioContext.createMediaStreamSource(a);e.gainNode=ua(e.audioContext);e.gainNode.gain.value=1;e.processorNode=va(e.audioContext);e.sourceNode.connect(e.gainNode);e.gainNode.connect(e.processorNode);e.worker.onmessage=e.onWorkerMessage;return e}_createClass(b,[{key:"start",value:function start(){var a=this;if("inactive"!==this.state){throw this.getStateError("start")}this.processorNode.onaudioprocess=function(b){a.worker.postMessage(qa(b.inputBuffer.getChannelData(0)))};this.processorNode.connect(this.audioContext.destination);if("closed"===this.audioContext.state){this.audioContext=new AudioContext}else if("suspended"===this.audioContext.state){this.audioContext.resume()}this.worker.postMessage(pa({sampleRate:this.audioContext.sampleRate}))}},{key:"stop",value:function stop(){if("inactive"===this.state){throw this.getStateError("stop")}this.processorNode.disconnect();if(this.isInternalAudioContext){this.audioContext.close()}this.worker.postMessage(ra())}},{key:"pause",value:function pause(){var a=this;if("inactive"===this.state){throw this.getStateError("pause")}this.audioContext.suspend().then(function(){a.state="paused";a.dispatchEvent(new Event("pause"))})}},{key:"resume",value:function resume(){var a=this;if("inactive"===this.state){throw this.getStateError("resume")}this.audioContext.resume().then(function(){a.state="recording";a.dispatchEvent(new Event("resume"))})}},{key:"requestData",value:function requestData(){}},{key:"getStateError",value:function getStateError(a){return new Error("Failed to execute '".concat(a,"' on 'MediaRecorder': The MediaRecorder's state is '").concat(this.state,"'."))}}]);return b}(ka);wa.isTypeSupported=function(a){return a===sa};L(wa.prototype,"start");L(wa.prototype,"stop");L(wa.prototype,"pause");L(wa.prototype,"resume");L(wa.prototype,"dataavailable");L(wa.prototype,"error");a.Mp3MediaRecorder=wa;Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=mp3-mediarecorder.min.js.map
