define("core/searchwidget/user",["exports","core_user/comboboxsearch/user","core/url","core/searchwidget/repository"],(function(_exports,_user,_url,Repository){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_user=_interopRequireDefault(_user),_url=_interopRequireDefault(_url),Repository=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Repository);class User extends _user.default{constructor(){super()}static init(){let extraParams=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return User.extraParams=extraParams,new User}fetchDataset(){var _User$extraParams,_User$extraParams$par,_User$extraParams2,_User$extraParams2$pa,_User$extraParams$par2,_User$extraParams3,_User$extraParams3$pa,_User$extraParams$par3,_User$extraParams4,_User$extraParams4$pa;if(void 0===(null==User||null===(_User$extraParams=User.extraParams)||void 0===_User$extraParams?void 0:_User$extraParams.cmid))return Repository.userFetch({courseid:User.extraParams.courseid},User.extraParams.service).then((r=>r.users));const onlyGraded=!!parseInt(null!==(_User$extraParams$par=null===(_User$extraParams2=User.extraParams)||void 0===_User$extraParams2||null===(_User$extraParams2$pa=_User$extraParams2.params)||void 0===_User$extraParams2$pa?void 0:_User$extraParams2$pa.onlygraded)&&void 0!==_User$extraParams$par?_User$extraParams$par:0),params={cmid:User.extraParams.cmid,mode:User.extraParams.reportmode,tableclass:User.extraParams.tableclass,optionclass:User.extraParams.optionclass,attempts:null!==(_User$extraParams$par2=null===(_User$extraParams3=User.extraParams)||void 0===_User$extraParams3||null===(_User$extraParams3$pa=_User$extraParams3.params)||void 0===_User$extraParams3$pa?void 0:_User$extraParams3$pa.attempts)&&void 0!==_User$extraParams$par2?_User$extraParams$par2:"",states:null!==(_User$extraParams$par3=null===(_User$extraParams4=User.extraParams)||void 0===_User$extraParams4||null===(_User$extraParams4$pa=_User$extraParams4.params)||void 0===_User$extraParams4$pa?void 0:_User$extraParams4$pa.states)&&void 0!==_User$extraParams$par3?_User$extraParams$par3:"",onlygraded:onlyGraded};return Repository.userFetch(params,User.extraParams.service).then((r=>{let extraStrings=["username"];return r.users.length>0&&Object.keys(r.users[0]).forEach((key=>{/^profile_field_(.*)$/.test(key)&&extraStrings.push(key)})),super.updateRequiredStrings(extraStrings),r.users}))}selectAllResultsLink(){return _url.default.relativeUrl(User.extraParams.path,{...User.extraParams.params,gpr_search:this.getSearchTerm()},!1)}selectOneLink(userID){return _url.default.relativeUrl(User.extraParams.path,{...User.extraParams.params,gpr_search:this.getSearchTerm(),gpr_userid:userID},!1)}}var obj,key,value;return _exports.default=User,value=void 0,(key="extraParams")in(obj=User)?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,_exports.default}));

//# sourceMappingURL=user.min.js.map