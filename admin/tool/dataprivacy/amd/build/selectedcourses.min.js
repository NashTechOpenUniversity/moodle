define ("tool_dataprivacy/selectedcourses",["exports","core/ajax","core/notification","core/modal_factory","core/modal_events","core/fragment","core/prefetch","core/str"],function(a,b,c,d,e,f,g,h){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=void 0;b=i(b);c=i(c);d=i(d);e=i(e);f=i(f);function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function k(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}(0,g.prefetchStrings)("tool_dataprivacy",["selectedcourses","approverequest","errornoselectedcourse"]);var l=function a(g,i){var l=this;j(this,a);k(this,"contextId",0);k(this,"requestId",0);k(this,"strings",null);k(this,"getBody",function(a){var b=null;if("undefined"!=typeof a){b={jsonformdata:JSON.stringify(a)}}return f.default.loadFragment("tool_dataprivacy","selectcourses_form",l.contextId,b)});k(this,"submitForm",function(a){a.preventDefault();l.modal.getRoot().find("form").submit()});k(this,"submitFormAjax",function(a){a.preventDefault();var d=l.modal.getRoot().find("form").serialize();if(-1===d.indexOf("coursecontextids")){var e=l.modal.getRoot().find(".custom-select"),f=l.modal.getRoot().find(".invalid-feedback");e.addClass("is-invalid");f.attr("style","display: block");(0,h.get_string)("errornoselectedcourse","tool_dataprivacy").then(function(a){f.empty().append(a)}).catch(c.default.exception);return}b.default.call([{methodname:"tool_dataprivacy_submit_selected_courses_form",args:{requestid:l.requestId,jsonformdata:JSON.stringify(d)},done:function done(a){if(0<a.warnings.length){l.modal.setBody(l.getBody(d))}else{l.modal.destroy();document.location.reload()}},fail:c.default.exception}])});this.contextId=g;this.requestId=i;d.default.create({type:d.default.types.SAVE_CANCEL,title:(0,h.get_string)("selectcourses","tool_dataprivacy"),body:this.getBody({requestid:i}),large:!0,removeOnClose:!0,buttons:{save:(0,h.get_string)("approverequest","tool_dataprivacy")}}).then(function(a){l.modal=a;return a}).then(function(a){a.getRoot().on(e.default.save,l.submitForm.bind(l));a.getRoot().on("submit","form",l.submitFormAjax.bind(l));a.show();return a}).catch(c.default.exception)};a.default=l;return a.default});
//# sourceMappingURL=selectedcourses.min.js.map
